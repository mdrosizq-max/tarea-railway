const express = require('express'); const mysql = require('mysql2'); const app = express(); app.use(express.urlencoded({ extended: true })); const port = process.env.PORT || 3000; const connection = mysql.createPool(process.env.MYSQL_URL); app.get('/', (req, res) => { connection.query('SELECT * FROM usuarios', (err, results) => { let filas = ''; if (results) { results.forEach(u => { filas += `<tr><td style='padding:10px; border-bottom:1px solid #333;'>${u.id}</td><td style='padding:10px; border-bottom:1px solid #333;'>${u.nombre}</td><td style='padding:10px; border-bottom:1px solid #333;'>${u.email}</td></tr>`; }); } res.send(`<html><body style='font-family:sans-serif; background:#0b0e14; color:white; padding:2rem;'><div style='max-width:600px; margin:auto; background:#151921; padding:2rem; border-radius:15px; border:1px solid #30363d;'><h2 style='color:#007bff;'>âž• Nuevo Usuario</h2><form action='/add' method='POST' style='display:flex; gap:10px; margin-bottom:2rem;'><input name='nombre' placeholder='Nombre' required style='padding:8px; border-radius:5px; border:1px solid #333; background:#0d1117; color:white; flex:1;'><input name='email' placeholder='Email' required style='padding:8px; border-radius:5px; border:1px solid #333; background:#0d1117; color:white; flex:1;'><button type='submit' style='background:#007bff; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;'>Guardar</button></form><hr style='border:0; border-top:1px solid #333; margin:2rem 0;'><h2 style='color:#007bff;'>ðŸ“‹ Lista de Usuarios</h2><table style='width:100%; border-collapse:collapse;'><thead><tr style='text-align:left; color:#8b949e;'><th>ID</th><th>Nombre</th><th>Email</th></tr></thead><tbody>${filas || '<tr><td colspan="3">No hay datos</td></tr>'}</tbody></table></div></body></html>`); }); }); app.post('/add', (req, res) => { const { nombre, email } = req.body; connection.query('INSERT INTO usuarios (nombre, email) VALUES (?, ?)', [nombre, email], () => res.redirect('/')); }); app.listen(port, () => console.log('Servidor CRUD Completo'));
